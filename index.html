 <!DOCTYPE html>
<!-- Template by html.am -->
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>ResearchBuzz Search Gizmos: Senator Social Slices, Twitter Edition</title>
		<style type="text/css">
			html, #page { padding:0; margin:0;}
			body { margin:0; padding:0; width:100%; color:#959595; font:normal 12px/2.0em Sans-Serif;} 
			h1, h2, h3, h4, h5, h6 {color:darkblue;}
			#page { background:#fff;}
			#header, #footer, #top-nav, #content, #content #contentbar, #content #sidebar { margin:0; padding:0;}
						
			/* Logo */
			#logo { padding:0; width:auto; float:left;}
			#logo h1 a, h1 a:hover { color:darkblue; text-decoration:none;}
			#logo h1 span { color:#24592c;}

			/* Header */
			#header { background:#fff; }
			#header-inner { margin:0 auto; padding:0; width:970px;}
			
			/* Feature */
			.feature { background:blue;padding:18px;}
			.feature-inner { margin:auto;width:970px; }
			.feature-inner h1 {color:#E9E9FC;font-size:32px;}
			
			/* Menu */
			#top-nav { margin:0 auto; padding:0px 0 0; height:37px; float:right;}
			#top-nav ul { list-style:none; padding:0; height:37px; float:left;}
			#top-nav ul li { margin:0; padding:0 0 0 8px; float:left;}
			#top-nav ul li a { display:block; margin:0; padding:8px 20px; color:blue; text-decoration:none;}
			#top-nav ul li.active a, #top-nav ul li a:hover { color:#d3d3f9;}
			
			/* Content */
			#content-inner { margin:0 auto; padding:10px 0; width:970px;background:#fff;}
			#content #contentbar { margin:0; padding:0; float:right; width:760px;}
			#content #contentbar .article {  font-size: 1.25em; color: black; margin:0 0 24px; padding:0 20px 0 15px; }
			#content #sidebar { background-color:#ECFFDC; padding:0; float:left; width:200px;}
			#content #sidebar .widget { margin:0 0 12px; padding:8px 8px 8px 13px;line-height:1.4em;}
			#content #sidebar .widget h3 a { text-decoration:none;}
			#content #sidebar .widget ul { margin:0; padding:0; list-style:none; color:#959595;}
			#content #sidebar .widget ul li { margin:0;}
			#content #sidebar .widget ul li { padding:4px 0; width:185px;}
			#content #sidebar .widget ul li a {font-size: 1.25em; color:black; text-decoration:none; margin-left:-16px; padding:4px 8px 4px 16px;}
			#content #sidebar .widget ul li a:hover { color:#d3d3f9; font-weight:bold; text-decoration:none;}
			
			/* Footerblurb */
			#footerblurb { background:#d3d3f9;color:blue;}
			#footerblurb-inner { margin:0 auto; width:922px; padding:24px;}
			#footerblurb .column { margin:0; text-align:justify; float:left;width:250px;padding:0 24px;}
			
			/* Footer */
			#footer { background:#fff;}
			#footer-inner { margin:auto; text-align:center; padding:12px; width:922px;}
			#footer a {color:blue;text-decoration:none;}
			
			/* Clear both sides to assist with div alignment  */
			.clr { clear:both; padding:0; margin:0; width:100%; font-size:0px; line-height:0px;}
		</style>
		

	</head>
	<body>
		<div id="page">
			<header id="header">
				<div id="header-inner">	
					<div id="logo">
						<h1><a href="#">ResearchBuzz<span>Search Gizmos</span></a></h1>
					</div>
					<div id="top-nav">
						<ul>
						<li><a href="https://github.com/ResearchBuzz">ResearchBuzz GitHub Home</a></li>
						<li><a href="https://www.researchbuzz.me">ResearchBuzz Main Site</a></li>
						<li><a href="https://www.rbfirehose.com">ResearchBuzz Firehose</a></li>
						</ul>
					</div>
					<div class="clr"></div>
				</div>
			</header>
			<div class="feature">
				<div class="feature-inner">
				<h1>Senator Social Slices, Twitter Edition: <br><br>Explore Senatorial TwitterSpace With Several Filters </h1>
				</div>
			</div>
		
	
			<div id="content">
				<div id="content-inner">
				
					<main id="contentbar">
						<div class="article">
							

<h2></h2>

<h3>
    
Senator Social Slices allows you to explore the TwitterSpace of the members of the current US Senate. You can filter the accounts searched by birth decade/generation, zodiac sign, gender, political party, percentage of votes missed, and percentage of time that senator voted against their party. <br><br> OR, you can ignore all the filters and just search the accounts of all current US Senators on Twitter (I think a 
couple of them aren't.)<br><br>

Links to search the filtered TwitterSpace appear at the bottom of the page under the "Parade them Politicians" button. Twitter has a search limit and the Senate has 100 members, so there may be multiple links if your filters encompass a lot of Senate members.

</h3>

<h4> I also have not yet accounted for the two I senators; apologies to Senators Sanders and King. (They'll still show up in search results unless you filter by party.)</h4>
  

   <label><b>Query:</b></label>
  <input type="text" class="searchq" value="medicare"><br><br>

<label for="Decade">Choose a birth decade or generation:</label>
<select name="decades" class="decades">
<option value="1000^3000">Everybody</option>
<option value="1930^1939">1930s</option>
<option value="1940^1949">1940s</option>
<option value="1950^1959">1950s</option>
<option value="1960^1969">1960s</option>
<option value="1970^1979">1970s</option>
<option value="1980^1989">1980s</option>
<option value="1928^1945">Silent Generation (1928-1945)</option>
<option value="1946^1964">Baby Boomers (1946-1964)</option>
<option value="1965^1980">Generation X (1965-1980)</option>
<option value="1981^1996">Millenials (1981-1996)</option> 

</select><br><br>


<label for="Zodiac">Choose Zodiac Sign:</label>
<select name="zodiac" class="zodiac">
<option value="Any">Any</option>
<option value="Aries">Aries</option>
<option value="Taurus">Taurus</option>
<option value="Gemini">Gemini</option>
<option value="Cancer">Cancer</option>
<option value="Leo">Leo</option>
<option value="Virgo">Virgo</option>
<option value="Libra">Libra</option>
<option value="Scorpio">Scorpio</option>
<option value="Sagittarius">Sagittarius</option>
<option value="Capricorn">Capricorn</option>
<option value="Aquarius">Aquarius</option> 
<option value="Pisces">Pisces</option>
</select><br><br>

<label for="gender">Choose Gender:</label>
<select name="gender" class="gender">
<option value="Any">Any</option>
<option value="F">Female</option>
<option value="M">Male</option>
</select><br><br>

<label for="polpar">Choose Political Party:</label>
<select name="polpar" class="polpar">
<option value="Any">Any</option>
<option value="D">Democrat</option>
<option value="R">Republican</option>
</select><br><br>

<label for="votemiss">Choose Percentage of votes missed:</label>
<select name="votemiss" class="votemiss">
<option value="-1^100">Any</option>
<option value="-1^10">Less than 10</option>
<option value="25^100">More than 25</option>
<option value="50^100">More than 50</option>
<option value="75^100">More than 75</option>
</select><br><br>

<label for="voteagainst">Choose Percentage of times they voted against home party:</label>
<select name="voteagainst" class="voteagainst">
<option value="-1^100">Any</option>
<option value="-1^1">Less than 1</option>
<option value="-1^5">Less than 5</option>
<option value="5.01^100">More than 5</option>
<option value="10.01^100">More than 10</option>
</select><br><br>




  <label><b>ProPublica API Key:</b></label>  <input type="text" class="apikey" size="20" value="Paste API key here"><br><br>
  <i>You'll need an API Key to use this tool. You can get them free from <a href="https://www.propublica.org/datastore/api/propublica-congress-api">https://www.propublica.org/datastore/api/propublica-congress-api</a> .</i><br><br>
 


<button onclick="Parade()">Parade them Politicians!</button><br>

<h4>Please note that you can either click these links to open the page in the same tab or right-click them to open in a new window. When you right click them you tend to get fewer results. I'm not sure why and I'm trying to figure it out. If you get fewer results than you'd expect, reload the Twitter results page.</h4>


<div id="FilterList">

</div>

<div id="Filters"> 

</div>



						</div>
					</main>
					
					<nav id="sidebar">
						<div class="widget">
							<h3>ResearchBuzz Search Gizmos</h3>
							<ul>
							<li><a href="https://researchbuzz.github.io/politician-parade-Twitter/">Politician Parade: Twitter</a></li>
							<li><a href="https://researchbuzz.github.io/politician-parade/">Politician Parade: Google News</a></li>
							<li><a href="https://researchbuzz.github.io/Time-Sliced-News-Search/">Time-Sliced News Search</a></li>
							<li><a href="https://researchbuzz.github.io/Kebberfegg/">Kebberfegg RSS Feed Generator</a></li>
							<li><a href="https://researchbuzz.github.io/blogspace-time-machine/">Blogspace Time Machine</a></li>
<li><a href="https://researchbuzz.github.io/Blog-Shovel/">Blog Shovel</a></li>
<li><a href="https://researchbuzz.github.io/sinker-search/">Sinker Search</a></li>
<li><a href="https://researchbuzz.github.io/The-Anti-Bullseye-Name-Search/">The Anti-Bullseye Name Search</a></li>
<li><a href="https://researchbuzz.github.io/Back-That-Ask-Up-/">Back That Ask Up</a></li>
<li><a href="https://researchbuzz.github.io/Twitter-Receipts/">Twitter Receipts</a></li>
								<li><a href="https://researchbuzz.github.io/Pams-Pin/">Pam's Pin</a></li>
								<li><a href="https://researchbuzz.github.io/Senator-Social-Slices-Twitter/">Senator Social Slices (Twitter)</a></li>
							</ul>
						</div>
					</nav>
					
					<div class="clr"></div>
				</div>
			</div>
		
			<div id="footerblurb">
				<div id="footerblurb-inner">
				
					<div class="column">
						<h2><span>What Is This?</span></h2>
						<p>The RB Gizmos are a collection of search tools made with JavaScript and HTML.</p>
					</div>	
					<div class="column">
						<h2><span>Why Is This?</span></h2>
						<p>Because I've been writing about searching and search engines since 1996 and I'm obsessed with them.</p>
					</div>
					<div class="column">
						<h2> </h2>
						<p><script> </script></p>
					</div>	
					
					<div class="clr"></div>
				</div>
			</div>
			<footer id="footer">
				<div id="footer-inner">
					
					<div class="clr"></div>
				</div>
			</footer>



		</div>


<script>


function Parade(){

    // Getting values from form 

    var searchq = document.querySelector(".searchq").value
    searchqd = searchq
    searchq = encodeURI(searchq)
//    console.log(searchq)
    var decades = document.querySelector(".decades").value
    var decadestart = decades.slice(0,4)
    var decadesend = decades.slice(5,9)

    var votemiss = document.querySelector(".votemiss").value
    const votemissA = votemiss.split("^")
    var votemissstart = votemissA[0]
    var votemissend = votemissA[1]

var voteagainst = document.querySelector(".voteagainst").value
    const voteagainstA = voteagainst.split("^")
    var voteagainststart = voteagainstA[0]
    var voteagainstend = voteagainstA[1]



    var genderq = document.querySelector(".gender").value 
    var polpar = document.querySelector(".polpar").value 
   

    var zodiac = document.querySelector(".zodiac").value
   var apikey = document.querySelector(".apikey").value
  
//    var api_url = "https://api.propublica.org/congress/v1/116/senate/members.json"
  var api_url = "https://api.propublica.org/congress/v1/117/senate/members.json"



     
    var search_url = "https://twitter.com/search?f=live&scr=typed+query&q="+searchq+"+"


    // Empty loop variable arrays for processing API data
    let mapdata = {}
 
   var loopstart = 0
   let Rpols = []
   let Dpols = []
   let Bpols = []
   let twitternames = []
   let twitterhandles = []
   let requirements = []
   let astrocount =[]
   let datecount = [] 
   let gendercount =[]
   let partycount =[]
   let msvotecount=[]
   let voteagainstcount=[]

   fetch(api_url, {
  mode: 'cors',
  headers: {
     'X-API-Key': apikey
  }})
   .then(function(response){
        return response.json()
   })
    .then (function(res){
      mapdata=res
   var looplimit = mapdata.results[0].members.length  
 

// Grabbing and pushing everything in a big-ass loop

while (loopstart < looplimit) {


// Twitter handle 

var twitter_account = mapdata.results[0].members[loopstart].twitter_account
var twitter_account = "from:"+twitter_account

// getting names	

var first_name = mapdata.results[0].members[loopstart].first_name
var last_name = mapdata.results[0].members[loopstart].last_name
var fullname = first_name+" "+last_name

// Getting Birth Date Things

// / Date of Birth
 
var date_of_birth = mapdata.results[0].members[loopstart].date_of_birth

// / Getting Month and Year 

const date_array = date_of_birth.split("-")
    var date_year = date_array[0]
    var month = date_array[1]
    var day = date_array[2]



// / Getting decade of birth 

var startyear = date_year.slice(0, -1) + '0'
var endyear = date_year.slice(0, -1) + '9'
   
// / Getting Zodiac Sign

var astro_sign

		if (month == 12){
			
			if (day < 22)
			astro_sign = "Sagittarius"
			else
			astro_sign ="Capricorn"
		}
			
		else if (month == 1){
			if (day < 20)
			astro_sign = "Capricorn"
			else
			astro_sign = "Aquarius"
		}
			
		else if (month == 2){
			if (day < 19)
			astro_sign = "Aquarius"
			else
			astro_sign = "Pisces"
		}
			
		else if(month == 3){
			if (day < 21)
			astro_sign = "Pisces"
			else
			astro_sign = "Aries"
		}
		else if (month == 4){
			if (day < 20)
			astro_sign = "Aries"
			else
			astro_sign = "Taurus"
		}
			
		else if (month == 5){
			if (day < 21)
			astro_sign = "Taurus"
			else
			astro_sign = "Gemini"
		}
			
		else if( month == 6){
			if (day < 21)
			astro_sign = "Gemini"
			else
			astro_sign = "Cancer"
		}
			
		else if (month == 7){
			if (day < 23)
			astro_sign = "Cancer"
			else
			astro_sign = "Leo"
		}
			
		else if( month == 8){
			if (day < 23)
			astro_sign = "Leo"
			else
			astro_sign = "Virgo"
		}
			
		else if (month == 9){
			if (day < 23)
			astro_sign = "Virgo"
			else
			astro_sign = "Libra"
		}
			
		else if (month == 10){
			if (day < 23)
			astro_sign = "Libra"
			else
			astro_sign = "Scorpio"
		}
			
		else if (month == 11){
			if (day < 22)
			astro_sign = "Scorpio"
			else
			astro_sign = "Sagittarius"
		}
			
	

// Doing Date Things


if (date_year > decadestart && date_year < decadesend) {
  datecount.push(fullname)
  datecount.push(twitter_account)
} else {
// console.log("Outside the Span")
}


if (astro_sign == zodiac) {
  astrocount.push(twitter_account)

}
 else if (zodiac == "Any") {
   astrocount.push(twitter_account)


} else {
  

}


// gender

var gender = mapdata.results[0].members[loopstart].gender



if (genderq == gender) {
  gendercount.push(twitter_account)}
 else if (genderq == "Any") {
 gendercount.push(twitter_account)
} else {
 // console.log("Not A Match")
}

// party

var partee = mapdata.results[0].members[loopstart].party


if (partee == polpar) {
  partycount.push(twitter_account)}
 else if (polpar == "Any") {
  partycount.push(twitter_account)}
 else {
//  console.log("Not A Party Match")
}


// percentage of missed votes

var missed_votes_pct = mapdata.results[0].members[loopstart].missed_votes_pct

if (missed_votes_pct > votemissstart && missed_votes_pct < votemissend) {
   msvotecount.push(twitter_account)
} else {
 // console.log("No Vote Miss Percent Match")
}



// Percentage of times voted against party 

var votes_against_party_pct = mapdata.results[0].members[loopstart].votes_against_party_pct

if (votes_against_party_pct > voteagainststart && votes_against_party_pct < voteagainstend) {
 
 voteagainstcount.push(twitter_account)
} else {
  // console.log("No Vote Against Percent Match")
}
 



loopstart++



}

// Going through the arrays and removing duplicates

let set1 = new Set(astrocount)
let set2 = new Set(datecount)

 const intersection = [...set1].filter(
    element => set2.has(element)
  );

let set3 = new Set(intersection)
let set4 = new Set(gendercount) 

const intersection2 = [...set3].filter(
    element => set4.has(element)
  );


let set5 = new Set(intersection2)
let set6 = new Set(partycount)

const intersection3 = [...set5].filter(
    element => set6.has(element)
  );

let set7 = new Set(intersection3)
let set8 = new Set(msvotecount)

const intersection4 = [...set7].filter(
    element => set8.has(element)
  );

let set9 = new Set(intersection4)
let set10 = new Set(voteagainstcount)

const intersection5 = [...set9].filter(
    element => set10.has(element)
  );

// Removing any blanks from the array

const cleanfinal = intersection5.filter(element => {
  return element !== "from:null";
});


const Citems = cleanfinal 

var FilterListD = document.getElementById("FilterList")
FilterListD.innerHTML = "<h4>Your Senate Search Filters:</h4>"+
"<b>Query:</b><i> "+searchqd+"</i><br>"+
"<b>Birth Decade/Generation:</b><i> "+decadestart+"-"+decadesend+"</i><br>"+
"<b>Zodiac Sign:</b><i> "+zodiac+"</i><br>"+
"<b>Gender:</b><i> "+genderq+"</i><br>"+
"<b>Political Party:</b><i> "+polpar+"</i><br>"+
"<b>Percentage of Votes Missed:</b><i> "+votemissstart+"-"+votemissend+"</i><br>"+
"<b>Percentage of Votes Against Party:</b><i> "+votemissstart+"-"+votemissend+"</i><br>"

const n = 12 

const displayresult = new Array(Math.ceil(Citems.length / n))
  .fill()
  .map(_ => Citems.splice(0, n))
  resultlength = displayresult.length
 
  resultstart = 0
var Bdiv = document.getElementById("Filters")
Bdiv.innerHTML = "<h4>Twitterspace Search URLs (there may be several if your query includes lots of senators):</h4>"  
while (resultstart < resultlength) {
var BitemsString = displayresult[resultstart]
var BitemsURL = BitemsString.join("%20OR%20")
var BitemsURL = "("+BitemsURL+")"
var resultsm = resultstart+1
var BitemsQ = search_url+BitemsURL+")"
var BitemsQCount = "Twitter Search for Filtered US Senate Twitter Accounts"+resultsm+"  (click to open) <br>"
var BitemsQ = "<a href=\""+BitemsQ+"\">"+BitemsQCount+"</a>"


Bdiv.innerHTML = Bdiv.innerHTML + BitemsQ + "<br><br>"

resultstart++
}


});
    
    }
</script>

	</body>


</html>
